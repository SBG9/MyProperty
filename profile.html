<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profile - MyProperty</title>
<link rel="stylesheet" href="css/style.css">
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f5f7fb}
.navbar{display:flex;justify-content:space-between;align-items:center;padding:15px 40px;background:#0f172a;color:#fff}
.navbar a{color:#00ffd9;text-decoration:none;margin-left:18px}
.container{max-width:1000px;margin:40px auto}
.card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,.1);margin-bottom:20px}
input,select,textarea,button{width:100%;padding:10px;margin-top:10px;box-sizing:border-box}
button{background:#22c55e;border:none;color:#fff;cursor:pointer}
button.cancel{background:#ef4444;margin-top:0}
h2{margin-top:0}
#avatarPreview{width:120px;height:120px;border-radius:50%;object-fit:cover;margin-bottom:10px;border:2px solid #22c55e;display:block}
.footer{background:#0f172a;color:#fff;text-align:center;padding:15px;margin-top:40px;font-size:14px}
.stats{display:flex;gap:20px;margin-top:10px}
.stats div{background:#f1f5f9;color:#2563eb;padding:15px;border-radius:10px;flex:1;text-align:center}
</style>
</head>
<body>

<header class="navbar">
  <div><b>MyProperty</b></div>
  <nav>
    <a href="index.html">Home</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="my-properties.html">My Properties</a>
    <a href="saved-properties.html">Saved</a>
    <a href="settings.html">Settings</a>
    <a href="logout.html">Logout</a>
  </nav>
</header>

<div class="container">

<!-- Profile Picture + Info -->
<div class="card">
<h2>My Profile</h2>
<img id="avatarPreview" src="" alt="Profile Picture">
<input type="file" id="avatarInput" accept="image/*">
<label>Full Name</label><input id="name" type="text">
<label>Email</label><input id="email" type="email">
<label>Mobile</label><input id="mobile" type="text">
<label>User Type</label>
<select id="type">
  <option value="Buyer">Buyer</option>
  <option value="Seller">Seller</option>
  <option value="Both">Both</option>
</select>
<button onclick="saveProfile()">Save Changes</button>
<button class="cancel" onclick="cancelChanges()">Cancel</button>
</div>

<!-- Password & Security -->
<div class="card">
<h2>Security</h2>
<label>Old Password</label><input id="oldPass" type="password">
<label>New Password</label><input id="newPass" type="password">
<label>Confirm Password</label><input id="confirmPass" type="password">
<label>Security Question</label>
<select id="secQ">
  <option value="">Select a question</option>
  <option value="school">Your first school?</option>
  <option value="pet">Your pet's name?</option>
  <option value="city">Your birth city?</option>
</select>
<label>Answer</label><input id="secA" type="text">
<button onclick="saveSecurity()">Update Security</button>
</div>

<!-- Preferences -->
<div class="card">
<h2>Preferences</h2>
<label>Preferred Location</label><input id="prefLocation" type="text">
<label>Preferred Property Type</label>
<select id="prefType">
  <option value="">Select Type</option>
  <option>Home</option>
  <option>Flat</option>
  <option>Agricultural Land</option>
  <option>Commercial</option>
</select>
<label>Budget (₹)</label>
<input id="prefBudgetMin" type="number" placeholder="Min">
<input id="prefBudgetMax" type="number" placeholder="Max">
<button onclick="savePreferences()">Save Preferences</button>
</div>

<!-- Stats / Activity -->
<div class="card">
<h2>Quick Stats</h2>
<div class="stats">
  <div>Total Properties<br><b id="statProps">0</b></div>
  <div>Saved Properties<br><b id="statSaved">0</b></div>
  <div>Recent Enquiries<br><b id="statEnq">0</b></div>
</div>
</div>

</div>

<div class="footer">
Contact Support: support@myproperty.com | +91 99999 99999 <br> © 2025 MyProperty
</div>

<script>
// Load user data
let user = JSON.parse(localStorage.getItem('user'));
if(!user) location.href='login.html';

// Set profile info
document.getElementById('name').value = user.name;
document.getElementById('email').value = user.email;
document.getElementById('mobile').value = user.mobile;
document.getElementById('type').value = user.type || "Buyer";
document.getElementById('avatarPreview').src = user.avatar || 'https://via.placeholder.com/120';

// Load preferences
document.getElementById('prefLocation').value = user.prefLocation || '';
document.getElementById('prefType').value = user.prefType || '';
document.getElementById('prefBudgetMin').value = user.prefBudgetMin || '';
document.getElementById('prefBudgetMax').value = user.prefBudgetMax || '';

// Stats (demo)
document.getElementById('statProps').innerText = user.statsProps || 0;
document.getElementById('statSaved').innerText = user.statsSaved || 0;
document.getElementById('statEnq').innerText = user.statsEnq || 0;

// Avatar upload preview
document.getElementById('avatarInput').addEventListener('change', function(e){
  const reader = new FileReader();
  reader.onload = function(){
    document.getElementById('avatarPreview').src = reader.result;
    user.avatar = reader.result;
  }
  reader.readAsDataURL(e.target.files[0]);
});

// Save Profile Info
function saveProfile(){
  if(!document.getElementById('name').value || !document.getElementById('email').value){
    alert('Name and Email are required!');
    return;
  }
  user.name = document.getElementById('name').value;
  user.email = document.getElementById('email').value;
  user.mobile = document.getElementById('mobile').value;
  user.type = document.getElementById('type').value;
  localStorage.setItem('user', JSON.stringify(user));
  alert('Profile saved successfully!');
}

// Cancel (reload data)
function cancelChanges(){ location.reload(); }

// Save Security
function saveSecurity(){
  let oldPass = document.getElementById('oldPass').value;
  let newPass = document.getElementById('newPass').value;
  let confirmPass = document.getElementById('confirmPass').value;
  if(oldPass && oldPass !== user.password){
    alert('Old password is incorrect!');
    return;
  }
  if(newPass && newPass !== confirmPass){
    alert('New password and confirm password do not match!');
    return;
  }
  if(newPass) user.password = newPass;
  user.secQ = document.getElementById('secQ').value;
  user.secA = document.getElementById('secA').value;
  localStorage.setItem('user', JSON.stringify(user));
  alert('Security updated!');
}

// Save Preferences
function savePreferences(){
  user.prefLocation = document.getElementById('prefLocation').value;
  user.prefType = document.getElementById('prefType').value;
  user.prefBudgetMin = document.getElementById('prefBudgetMin').value;
  user.prefBudgetMax = document.getElementById('prefBudgetMax').value;
  localStorage.setItem('user', JSON.stringify(user));
  alert('Preferences saved!');
}
</script>

</body>
</html>
