<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profile - MyProperty</title>
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f5f7fb}
.navbar{display:flex;justify-content:space-between;align-items:center;padding:15px 40px;background:#0f172a;color:#fff;flex-wrap:wrap}
.navbar a{color:#00ffd9;text-decoration:none;margin-left:18px;font-weight:600}
.container{max-width:1100px;margin:40px auto;padding:0 15px}

/* PROFILE LAYOUT */
.profile-hero{display:grid;grid-template-columns:350px 1fr;gap:25px;margin-bottom:30px}
.profile-main{background:#fff;padding:25px;border-radius:12px;box-shadow:0 0 12px rgba(0,0,0,.1)}
.profile-sidebar{background:#fff;padding:25px;border-radius:12px;box-shadow:0 0 12px rgba(0,0,0,.1)}

/* AVATAR & HEADER */
.profile-header{text-align:center;padding-bottom:20px;border-bottom:2px solid #f1f5f9;margin-bottom:20px}
.avatar-large{width:120px;height:120px;border-radius:50%;border:4px solid #22c55e;margin:0 auto 15px;display:block;object-fit:cover}
.profile-h1{font-size:26px;color:#0f172a;margin:0 0 5px}
.profile-subtitle{color:#64748b;margin:0;font-size:16px}

/* FORM ELEMENTS */
.form-group{margin-bottom:18px}
.form-group label{display:block;margin-bottom:6px;color:#374151;font-weight:600;font-size:14px}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:12px;border:2px solid #e5e7eb;border-radius:8px;font-size:15px;box-sizing:border-box;transition:all .2s}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:#22c55e;box-shadow:0 0 0 3px rgba(34,197,94,.1)}
.form-group textarea{min-height:90px;resize:vertical}

/* CONTACT BUTTONS */
.contact-row{display:flex;flex-wrap:wrap;gap:10px;margin-top:15px}
.contact-btn{display:inline-flex;align-items:center;gap:8px;padding:12px 18px;background:#22c55e;color:#fff;text-decoration:none;border-radius:8px;font-weight:500;font-size:14px;transition:all .2s}
.contact-btn:hover{background:#16a34a;transform:translateY(-1px)}
.contact-btn.whatsapp{background:#25d366}
.contact-btn.call{background:#ef4444}

/* STATS */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:15px;margin:20px 0}
.stat-card{background:#f8fafc;padding:18px;border-radius:10px;text-align:center}
.stat-number{font-size:24px;font-weight:bold;color:#2563eb;margin-bottom:4px}
.stat-label{color:#64748b;font-size:13px}

/* BUTTONS */
.btn-save{background:#22c55e;color:#fff;border:none;padding:14px 28px;border-radius:8px;cursor:pointer;font-size:15px;font-weight:600;width:100%;margin-top:10px;transition:.2s}
.btn-save:hover{background:#16a34a}
.btn-edit{background:#2563eb;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;margin-bottom:15px}
.btn-edit:hover{background:#1d4ed8}

/* DRAWER */
.drawer{position:fixed;top:0;right:-400px;width:400px;height:100vh;background:#fff;box-shadow:-5px 0 20px rgba(0,0,0,.15);transition:all .3s;z-index:1000;overflow-y:auto}
.drawer.open{right:0}
.drawer-header{background:#0f172a;color:#fff;padding:20px}
.drawer-content{padding:20px}
.drawer-toggle{position:absolute;top:20px;right:20px;background:none;border:none;font-size:24px;cursor:pointer;color:#00ffd9}

/* PROPERTY PREVIEW */
.properties-list{margin-top:20px}
.property-item{display:flex;gap:12px;padding:15px;background:#f8fafc;border-radius:8px;margin-bottom:10px}
.property-img{width:60px;height:60px;border-radius:6px;object-fit:cover}

/* FOOTER LINKS */
.footer-links{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;padding:25px;background:#fff;border-radius:12px;box-shadow:0 0 12px rgba(0,0,0,.1);margin-top:30px}
.footer-links a{color:#2563eb;text-decoration:none;font-weight:500;padding:8px 16px;border-radius:6px;transition:.2s}
.footer-links a:hover{background:#f1f5f9}

/* RESPONSIVE */
@media (max-width:768px){
  .profile-hero{grid-template-columns:1fr;gap:20px}
  .contact-row{flex-direction:column}
  .drawer{width:100%;right:-100%}
}
</style>
</head>
<body>

<!-- NAVBAR -->
<header class="navbar">
  <div><b>MyProperty</b></div>
  <nav>
    <a href="index.html">Home</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="profile.html">Profile</a>
    <a href="my-properties.html">My Properties</a>
    <a href="saved-properties.html">Saved</a>
    <a href="settings.html">Settings</a>
    <a href="#" onclick="logout()">Logout</a>
  </nav>
</header>

<div class="container">

<!-- PROFILE HERO -->
<section class="profile-hero">
  
  <!-- LEFT - MAIN PROFILE -->
  <div class="profile-main">
    <div class="profile-header">
      <img id="avatarPreview" class="avatar-large" src="https://via.placeholder.com/120" alt="Profile Picture">
      <input type="file" id="avatarInput" accept="image/*" style="display:none">
      <button class="btn-edit" onclick="document.getElementById('avatarInput').click()">üì∏ Change Photo</button>
      <h1 class="profile-h1" id="profileName">User Name</h1>
      <p class="profile-subtitle" id="profileType">Property Agent</p>
    </div>

    <!-- BASIC INFO -->
    <div class="form-group">
      <label>Full Name</label>
      <input type="text" id="fullName">
    </div>
    
    <div class="form-group">
      <label>Business Name</label>
      <input type="text" id="businessName">
    </div>

    <div class="form-group">
      <label>Phone</label>
      <input type="tel" id="mobile">
    </div>

    <div class="form-group">
      <label>Email</label>
      <input type="email" id="email">
    </div>

    <div class="form-group">
      <label>Location</label>
      <input type="text" id="location" placeholder="Kolhapur, Maharashtra">
    </div>

    <div class="form-group">
      <label>Experience</label>
      <input type="text" id="experience" placeholder="5+ Years">
    </div>

    <button class="btn-save" onclick="saveProfile()">üíæ Save Profile</button>
  </div>

  <!-- RIGHT - STATS & QUICK INFO -->
  <div class="profile-sidebar">
    <h3 style="margin-bottom:15px;color:#0f172a">üìä Quick Stats</h3>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="statProps">0</div>
        <div class="stat-label">Total Properties</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statViews">45</div>
        <div class="stat-label">Profile Views</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statDeals">12</div>
        <div class="stat-label">Deals Closed</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statRating">4.8</div>
        <div class="stat-label">Rating ‚òÖ</div>
      </div>
    </div>

    <!-- CONTACT LINKS -->
    <div style="margin-top:25px">
      <h4 style="color:#0f172a;margin-bottom:15px">üìû Contact Me</h4>
      <div class="contact-row">
        <a href="#" class="contact-btn whatsapp" id="whatsappBtn">üí¨ WhatsApp</a>
        <a href="#" class="contact-btn call" id="callBtn">üìû Call</a>
        <a href="#" class="contact-btn" id="emailBtn">‚úâÔ∏è Email</a>
      </div>
    </div>
  </div>
</section>

<!-- ADVANCED FEATURES DRAWER BUTTON -->
<div style="text-align:center;margin:30px 0">
  <button class="btn-edit" onclick="toggleDrawer()" style="width:auto;padding:12px 24px">‚öôÔ∏è More Options</button>
</div>

<!-- MY PROPERTIES PREVIEW -->
<div class="card" style="margin-top:20px">
  <h2>üè† My Active Properties <span style="font-size:14px;color:#64748b">(3)</span></h2>
  <div id="propertiesPreview" style="margin-top:15px">
    <p style="text-align:center;color:#64748b;padding:30px">No properties added yet. <a href="add-property.html" style="color:#2563eb">Add your first property ‚Üí</a></p>
  </div>
</div>

<!-- QUICK LINKS FOOTER -->
<div class="footer-links">
  <a href="dashboard.html">üìä Dashboard</a>
  <a href="my-properties.html">üè† Properties</a>
  <a href="add-property.html">‚ûï Add Property</a>
  <a href="saved-properties.html">‚ù§Ô∏è Saved</a>
  <a href="enquiries.html">üí¨ Enquiries</a>
  <a href="settings.html">‚öôÔ∏è Settings</a>
</div>

</div>

<!-- DRAWER - ADVANCED FEATURES -->
<div class="drawer" id="featureDrawer">
  <div class="drawer-header">
    <h3>‚öôÔ∏è Advanced Profile Settings</h3>
    <button class="drawer-toggle" onclick="toggleDrawer()">√ó</button>
  </div>
  <div class="drawer-content">
    
    <!-- SECURITY -->
    <div class="card" style="margin-bottom:20px">
      <h3>üîí Security</h3>
      <div class="form-group">
        <label>Change Password</label>
        <input type="password" id="newPassword" placeholder="New Password">
      </div>
      <div class="form-group">
        <label>Security Question</label>
        <select id="securityQuestion">
          <option value="">Select question</option>
          <option value="school">Your first school?</option>
          <option value="pet">Your pet's name?</option>
          <option value="teacher">Favourite teacher's name?</option>
          <option value="birthplace">Your birthplace?</option>
        </select>
      </div>
      <div class="form-group">
        <label>Answer</label>
        <input type="text" id="securityAnswer">
      </div>
      <button class="btn-save" onclick="saveSecurity()">Update Security</button>
    </div>

    <!-- PREFERENCES -->
    <div class="card" style="margin-bottom:20px">
      <h3>üéØ Preferences</h3>
      <div class="form-group">
        <label>Preferred Locations</label>
        <textarea id="prefLocations" placeholder="Kolhapur, Sangli, Satara..."></textarea>
      </div>
      <div class="form-group">
        <label>Property Types</label>
        <select id="prefPropertyType">
          <option>Residential</option>
          <option>Commercial</option>
          <option>Agricultural</option>
          <option>Plots</option>
        </select>
      </div>
      <button class="btn-save" onclick="savePreferences()">Save Preferences</button>
    </div>

    <!-- ABOUT ME -->
    <div class="card">
      <h3>‚úçÔ∏è About Me</h3>
      <div class="form-group">
        <label>Bio (Max 200 chars)</label>
        <textarea id="bio" maxlength="200" placeholder="Tell others about your expertise..."></textarea>
        <div style="text-align:right;font-size:12px;color:#64748b" id="bioCount">0/200</div>
      </div>
      <button class="btn-save" onclick="saveBio()">Update Bio</button>
    </div>
  </div>
</div>

<!-- FOOTER -->
<div class="footer" style="margin-top:40px">
Contact Support: [support@myproperty.com](mailto:support@myproperty.com) | +91 98765 43210 <br>
¬© 2025 MyProperty - Profile Page
</div>

<script>
// LOGIN CHECK - SAME AS YOUR SYSTEM
const user = JSON.parse(localStorage.getItem('loggedInUser'));
if(!user || localStorage.getItem('isLoggedIn') !== 'yes'){
  window.location.replace('login.html');
}

// LOAD PROFILE DATA
function loadProfileData(){
  document.getElementById('profileName').textContent = user.name || 'User';
  document.getElementById('fullName').value = user.name || '';
  document.getElementById('businessName').value = user.businessName || '';
  document.getElementById('mobile').value = user.mobile || '';
  document.getElementById('email').value = user.email || '';
  document.getElementById('location').value = user.location || 'Kolhapur, Maharashtra';
  document.getElementById('experience').value = user.experience || '';
  document.getElementById('avatarPreview').src = user.avatar || 'https://via.placeholder.com/120';
  
  // CONTACT LINKS
  document.getElementById('whatsappBtn').href = `https://wa.me/91${user.mobile}`;
  document.getElementById('callBtn').href = `tel:+91${user.mobile}`;
  document.getElementById('emailBtn').href = `mailto:${user.email}`;
  
  // STATS
  const allProperties = JSON.parse(localStorage.getItem('properties')) || [];
  document.getElementById('statProps').textContent = allProperties.filter(p => p.ownerMobile === user.mobile).length;
}
loadProfileData();

// AVATAR UPLOAD
document.getElementById('avatarInput').addEventListener('change', function(e){
  const reader = new FileReader();
  reader.onload = function(){
    document.getElementById('avatarPreview').src = reader.result;
    user.avatar = reader.result;
  }
  reader.readAsDataURL(e.target.files[0]);
});

// SAVE PROFILE
function saveProfile(){
  user.name = document.getElementById('fullName').value;
  user.businessName = document.getElementById('businessName').value;
  user.mobile = document.getElementById('mobile').value;
  user.email = document.getElementById('email').value;
  user.location = document.getElementById('location').value;
  user.experience = document.getElementById('experience').value;
  
  localStorage.setItem('loggedInUser', JSON.stringify(user));
  let users = JSON.parse(localStorage.getItem('users')) || [];
  const index = users.findIndex(u => u.id === user.id);
  if(index !== -1) users[index] = user;
  localStorage.setItem('users', JSON.stringify(users));
  
  document.getElementById('profileName').textContent = user.name;
  alert('‚úÖ Profile updated successfully!');
}

// DRAWER TOGGLE
function toggleDrawer(){
  const drawer = document.getElementById('featureDrawer');
  drawer.classList.toggle('open');
}

// SECURITY SETTINGS
function saveSecurity(){
  user.password = document.getElementById('newPassword').value;
  user.security = {
    question: document.getElementById('securityQuestion').value,
    answer: document.getElementById('securityAnswer').value
  };
  updateUserData();
  alert('üîí Security updated!');
}

// PREFERENCES
function savePreferences(){
  user.prefLocations = document.getElementById('prefLocations').value;
  user.prefPropertyType = document.getElementById('prefPropertyType').value;
  updateUserData();
  alert('üéØ Preferences saved!');
}

// BIO
function saveBio(){
  user.bio = document.getElementById('bio').value;
  updateUserData();
  alert('‚úçÔ∏è Bio updated!');
}

function updateUserData(){
  localStorage.setItem('loggedInUser', JSON.stringify(user));
  let users = JSON.parse(localStorage.getItem('users')) || [];
  const index = users.findIndex(u => u.id === user.id);
  if(index !== -1) users[index] = user;
  localStorage.setItem('users', JSON.stringify(users));
}

// BIO COUNTER
document.getElementById('bio').addEventListener('input', function(){
  document.getElementById('bioCount').textContent = this.value.length + '/200';
});

// LOGOUT
function logout(){
  localStorage.removeItem('loggedInUser');
  localStorage.removeItem('isLoggedIn');
  sessionStorage.clear();
  window.location.replace('login.html');
}
</script>

</body>
</html>
