<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MyProperty | Buy, Sell & Rent</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f5f7fb;margin:0}
.navbar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:15px 20px;background:#0f172a;box-shadow:0 2px 8px rgba(0,0,0,0.08);}
.navbar nav a{margin-left:18px;text-decoration:none;color:#00ffd9;font-weight:600;}
.navbar .btn{background:#0f172a;color:#00ffd9;padding:8px 14px;border-radius:6px;text-decoration:none;}
.hero{display:flex;flex-wrap:wrap;justify-content:space-between;max-width:1200px;margin:40px auto;gap:20px;background:#cfd7e9;padding:20px;border-radius:14px;}
.hero-left{flex:1;min-width:280px;}
.hero-right{width:420px;min-width:280px;position:relative;}
.hero-left p.desc{margin-top:12px;color:#444;line-height:1.6;max-width:520px;}
.hero-actions{margin-top:22px;display:flex;flex-wrap:wrap;gap:15px;align-items:center;}
.list-btn{padding:12px 18px;background:#22c55e;border:none;color:white;font-size:15px;border-radius:8px;cursor:pointer;}
.search-mini{display:flex;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 0 8px rgba(0,0,0,0.15);}
.search-mini input{padding:10px;border:none;outline:none;width:220px;}
.search-btn{background:#2563eb;border:none;color:white;padding:0 16px;cursor:pointer;}
.main-card{background:#ffffff;border-radius:16px;box-shadow:0 0 14px rgba(0,0,0,0.12);padding:28px 22px 22px;position:relative;}
.main-card .badge{position:absolute;top:-12px;left:-12px;background:#2563eb;color:#fff;padding:8px 14px;border-radius:10px;font-weight:bold;box-shadow:0 4px 10px rgba(0,0,0,0.2);}
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;text-align:center;margin-bottom:20px;}
.stats-grid div{background:#f1f5f9;padding:16px;border-radius:12px;}
.stats-grid b{display:block;font-size:22px;color:#2563eb;}
.trust-inner{background:linear-gradient(135deg,#0f172a,#1e293b);color:#fff;padding:16px;border-radius:12px;}
.trust-inner h4{margin:0 0 10px;color:#22c55e;}
.trust-inner ul{padding-left:18px;margin:0;}
.trust-inner li{margin-bottom:6px;font-size:14px;}
.search-box{max-width:1200px;margin:30px auto;background:#fff;padding:20px;border-radius:14px;display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;box-shadow:0 0 10px rgba(0,0,0,0.08);}
.search-box select,.search-box input{padding:8px;}
.search-box button{grid-column:span 6;padding:12px;background:#22c55e;color:white;border:none;font-size:16px;cursor:pointer;}
.feed{max-width:1200px;margin:40px auto;}
.property-card{display:flex;flex-wrap:wrap;gap:15px;background:#fff;padding:15px;border-radius:14px;margin-bottom:20px;box-shadow:0 0 10px rgba(0,0,0,0.08);}
.property-card img{width:260px;border-radius:12px;min-width:200px;object-fit:cover;}
.property-info{flex:1;min-width:200px;}
.price{font-size:20px;color:#2563eb;font-weight:bold;}
.actions button{padding:8px 14px;margin-right:10px;cursor:pointer;}
.recommended {max-width:1200px;margin:40px auto 20px;background:#ffffff;padding:25px;border-radius:14px;box-shadow:0 0 10px rgba(0,0,0,0.08);}
.recommended h2 {margin:0 0 8px;color:#0f172a;}
.recommended p {margin:0;color:#555;font-size:15px;}
footer{text-align:center;padding:15px;background:#0f172a;color:#fff;margin-top:20px;}

.live-mini-card{
  background:#fff;
  border-radius:12px;
  padding:14px 18px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
  cursor:pointer;
  width:220px;          /* üîë SMALL WIDTH */
  margin:12px 0;
}

.mini-title{
  font-size:14px;
  color:#555;
}

.mini-count{
  font-size:26px;
  font-weight:700;
  color:#ef4444;
  margin-top:4px;
}



</style>
</head>
<body>

<header class="navbar">
  <div class="logo"><b>MyProperty</b></div>
  <nav id="mainNav"></nav>
</header>

<section class="hero">
  <div class="hero-left">
    <h1>Buy, Sell & Rent Properties</h1>
    <p>Trusted platform for Agricultural & Urban Properties</p>
    <p class="desc">MyProperty connects genuine buyers, sellers and renters on one trusted platform. Discover verified agricultural and urban properties with transparent pricing. Contact property owners directly without brokers or hidden charges. Simple search, secure communication and real opportunities in one place.</p>
    <div class="hero-actions">
      <button class="list-btn" id="listPropertyBtn">List Your Property ‚Äì Free</button>
      <div class="search-mini">
        <input type="text" placeholder="Search by city, area or keyword" id="searchInput">
        <button class="search-btn" id="searchBtn">Search</button>
      </div>

      
<div class="live-mini-card" onclick="location.href='userrequirement.html'">
  <div class="mini-title">üî• Live Requirements</div>
  <div class="mini-count" id="reqCount">0</div>
</div>

    </div>
  </div>

  <div class="hero-right">
    <div class="main-card">
      <div class="badge">MyProperty</div>
      <div class="stats-grid">
        <div>Registered<b>1200+</b></div>
        <div>Sold<b>450+</b></div>
        <div>Available<b>750+</b></div>
        <div>Locations<b>180+</b></div>
      </div>
      <div class="trust-inner">
        <h4>Why Choose MyProperty?</h4>
        <ul>
          <li>‚úî Verified & genuine property listings</li>
          <li>‚úî Direct owner contact ‚Äì no middlemen</li>
          <li>‚úî Support for buy, sell & rent properties</li>
          <li>‚úî Transparent pricing & secure communication</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="search-box">
  <select id="propType">
    <option>Property Type</option>
    <option>Home</option>
    <option>Flat</option>
    <option>Agricultural Land</option>
    <option>Plot</option>
    <option>Commercial Space</option>
  </select>
  <select id="purpose">
    <option>Purpose</option>
    <option>Buy</option>
    <option>Rent</option>
  </select>
  <input type="number" placeholder="Min Price" id="minPrice">
  <input type="number" placeholder="Max Price" id="maxPrice">
  <input type="text" placeholder="City / Location" id="location">
  <input type="text" placeholder="Keyword (optional)" id="keyword">
  <button id="searchProperties">Search Properties</button>
</section>

<section class="recommended">
  <h2>Recommended Properties</h2>
  <p>Based on user interest and trending listings, we recommend these properties for better deals and locations.</p>
</section>

<section class="feed" id="propertyFeed"></section>

<footer>
Support: support@myproperty.xcom | +91 98765 xxxxx <br>
¬© 2025 MyProperty        <a href="contact.html">Contact here</a>

</footer>

<script>
document.addEventListener("DOMContentLoaded", ()=>{

  const nav = document.getElementById("mainNav");
  const listBtn = document.getElementById("listPropertyBtn");
  const feed = document.getElementById("propertyFeed");

  const isLoggedIn = localStorage.getItem("isLoggedIn") === "yes";
  const user = JSON.parse(localStorage.getItem("loggedInUser"));


  /* ---------- NAVBAR ---------- */
  if(!isLoggedIn){
    nav.innerHTML = `
      <a href="index.html">Home</a>
      <a href="buy.html">Buy</a>
      <a href="rent.html">Rent</a>
      <a href="auth.html" class="btn">Register Property</a>
      <a href="auth.html">Login</a> 
    `;
    listBtn.onclick = ()=>location.href="auth.html"; //11 jan //11jan up
  }else{
    nav.innerHTML = `
      <a href="index.html">Home</a>
      <a href="buy.html">Buy</a>
      <a href="rent.html">Rent</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="my-properties.html">My Properties</a>
      <a href="add-property.html">Add Property</a>
      <a href="#" onclick="logout()">Logout</a>
    `;
    listBtn.onclick = ()=>location.href="add-property.html";
  }

  /* ---------- PROPERTY FEED (PUBLIC) ---------- */
  const properties = JSON.parse(localStorage.getItem("properties")) || [];
  feed.innerHTML = "";

  if(properties.length === 0){
    feed.innerHTML = `<p style="text-align:center">No properties listed yet.</p>`;
    return;
  }

  properties.forEach(p=>{
    const card = document.createElement("div");
    card.className = "property-card";

    card.innerHTML = `
      <img src="${p.images?.[0] || 'images/sample.jpg'}">
      <div class="property-info">
        <h3>${p.type}</h3>
        <p>üìç ${p.location}</p>
        <div class="price">‚Çπ${p.price}</div>
        <p>${p.description || ""}</p>

        <div class="actions">
          <button onclick="viewContact('${p.contactPhone || ''}')">üìû View Contact</button>
          <button onclick="likeProperty()">‚ù§Ô∏è Like</button>
          
          <button onclick="saveProperty(${p.id})">üíæ Save</button>

        </div>
      </div>
    `;
    feed.appendChild(card);
  });

  /* ---------- SEARCH PROPERTIES ---------- */
document.getElementById("searchProperties").onclick = () => {

  const type = document.getElementById("propType").value;
  const purpose = document.getElementById("purpose").value;
  const min = document.getElementById("minPrice").value;
  const max = document.getElementById("maxPrice").value;
  const location = document.getElementById("location").value.toLowerCase();
  const keyword = document.getElementById("keyword").value.toLowerCase();

  let results = properties.filter(p => {

    if(type !== "Property Type" && p.type !== type) return false;
    if(purpose !== "Purpose" && p.purpose !== purpose) return false;
    if(min && p.price < min) return false;
    if(max && p.price > max) return false;
    if(location && !p.location.toLowerCase().includes(location)) return false;
    if(keyword && !JSON.stringify(p).toLowerCase().includes(keyword)) return false;

    return true;
  });

  feed.innerHTML = "";

  if(results.length === 0){
    feed.innerHTML = `
      <div class="property-card">
        <div class="property-info">
          <h3>No matching properties found üòï</h3>
          <p>You can post your requirement and property owners will contact you.</p>
          <button class="list-btn" onclick="location.href='userrequirement.html'">
            Post Your Requirement
          </button>
        </div>
      </div>
    `;
    return;
  }

  results.forEach(p => renderHomeCard(p));
};
function renderHomeCard(p){
  const card = document.createElement("div");
  card.className = "property-card";

  card.innerHTML = `
    <img src="${p.images?.[0] || 'images/sample.jpg'}">
    <div class="property-info">
      <h3>${p.type}</h3>
      <p>üìç ${p.location}</p>
      <div class="price">‚Çπ${p.price}</div>
      <p>${p.description || ""}</p>
    </div>
  `;
  document.getElementById("propertyFeed").appendChild(card);
}

/* ===== LIVE REQUIREMENTS COUNT ===== */
const requirements =
  JSON.parse(localStorage.getItem("requirements")) || [];

const reqCountEl = document.getElementById("reqCount");
if(reqCountEl){
  reqCountEl.innerText = requirements.length;
}



});

/* ---------- ACTIONS ---------- */
function likeProperty(){
  // if(localStorage.getItem("loggedIn") !== "yes")--------
  if(localStorage.getItem("isLoggedIn") !== "yes")
{
    alert("Please login first");
    location.href="auth.html"; //11jan
    return;
  }
  alert("‚ù§Ô∏è Property liked");
}

function saveProperty(id){   //9j newlly added code.
  if(localStorage.getItem("isLoggedIn") !== "yes"){
    alert("Please login first");
    location.href="auth.html"; //11 jan
    return;
  }

  // get logged-in user
  const user = JSON.parse(localStorage.getItem("loggedInUser"));
  if(!user.savedProperties) user.savedProperties = [];

  if(!user.savedProperties.includes(id)){
    user.savedProperties.push(id);
    localStorage.setItem("loggedInUser", JSON.stringify(user));

    // update global users array
    let users = JSON.parse(localStorage.getItem("users")) || [];
    const index = users.findIndex(u => u.id === user.id);
    if(index !== -1){
      users[index] = user;
      localStorage.setItem("users", JSON.stringify(users));
    }

    alert("üíæ Property saved to your list!");
  } else {
    alert("üíæ Property already saved!");
  }
}


function viewContact(phone){
  if(!phone){
    alert("Contact not available");
    return;
  }
  alert("Contact: " + phone);
}

// function logout
function logout(){
  localStorage.removeItem("loggedInUser");
  localStorage.removeItem("isLoggedIn");
  location.href="logout.html";
}

</script>


</body>
</html>


<!-- <button onclick="saveProperty()">üíæ Save</button> //9j -->