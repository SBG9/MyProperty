<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login - MyProperty</title>
<link rel="stylesheet" href="css/style.css">
<style>
/* Inline adjustments for login page */
.container{max-width:450px;margin:60px auto;padding:20px}
.card{background:#fff;padding:25px;border-radius:12px;box-shadow:0 0 15px rgba(0,0,0,0.1)}
input,select,button{width:100%;padding:10px;margin-top:10px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box}
button{background:#22c55e;color:#fff;border:none;cursor:pointer}
button.secondary{background:#2563eb;margin-top:5px}
p.forgot{cursor:pointer;color:#2563eb;margin-top:10px;text-align:center}
</style>
</head>
<body>

<!-- Header -->
<header class="navbar">
  <div class="logo"><b>MyProperty</b></div>
  <nav>
    <a href="index.html">Home</a>
    <a href="login.html">Login</a>
    <a href="register.html">Register</a>
  </nav>
</header>

<div class="container">
  <!-- Login Card -->
  <div class="card" id="loginCard">
    <h2>Login</h2>
    <input id="email" placeholder="Email / Username">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <button class="secondary" onclick="location.href='register.html'">Register</button>
    <p class="forgot" onclick="showForgot()">Forgot Password?</p>
  </div>

  <!-- Forgot Password Card -->
  <div class="card" id="forgotCard" style="display:none">
    <h2>Forgot Password</h2>
    <input id="fpEmail" placeholder="Enter your registered Email">
    <button onclick="verifyUser()">Next</button>
    <div id="securitySection" style="display:none;margin-top:15px;">
      <p id="secQuestion"></p>
      <input id="secAnswer" placeholder="Answer">
      <input id="newPassword" type="password" placeholder="New Password">
      <button onclick="resetPassword()">Reset Password</button>
    </div>
  </div>
</div>

<footer>
  Need help? Contact our developers: <br>
  Email: dev@myproperty.com | Phone: +91 9876543210
</footer>

<script>
// Default user for demo
if(!localStorage.getItem('user')){
  localStorage.setItem('user', JSON.stringify({
    email: "user@example.com",
    password: "User123!",
    sq: "Your first school?",
    sa: "Greenwood"
  }));
}

function login(){
  let user = JSON.parse(localStorage.getItem('user'));
  let e = document.getElementById('email').value;
  let p = document.getElementById('password').value;
  if(!user || e!==user.email || p!==user.password){
    alert('Wrong credentials');
    return;
  }
  location.href='dashboard.html';
}

function showForgot(){
  document.getElementById('loginCard').style.display='none';
  document.getElementById('forgotCard').style.display='block';
}

function verifyUser(){
  let user = JSON.parse(localStorage.getItem('user'));
  let e = document.getElementById('fpEmail').value;
  if(e!==user.email){
    alert("Email not found. Contact support in footer.");
    return;
  }
  document.getElementById('secQuestion').innerText = "Security Question: " + user.sq;
  document.getElementById('securitySection').style.display='block';
}

function resetPassword(){
  let user = JSON.parse(localStorage.getItem('user'));
  let ans = document.getElementById('secAnswer').value;
  let newPass = document.getElementById('newPassword').value;
  if(ans!==user.sa){
    alert("Wrong answer. Contact support in footer.");
    return;
  }
  user.password = newPass;
  localStorage.setItem('user', JSON.stringify(user));
  alert("Password reset successfully! You can login now.");
  document.getElementById('forgotCard').style.display='none';
  document.getElementById('loginCard').style.display='block';
}
</script>

</body>
</html>
